// -----------------------------------------------------------------------------------------
// ðŸ“Œ ê°•ì˜ë‚´ìš©ì¤‘ ì¤‘ìš”ë¶€ë¶„ ì²´í¬
// â­ï¸ ì§‘ì¤‘í•˜ìž ì§‘ì¤‘ì„
// -----------------------------------------------------------------------------------------
// - addMeetupí•¸ë“¤ëŸ¬ë¥¼ ì‚¬ì‹¤ì€ formíŒŒì¼ì—ì„œë„ ì§„í–‰í• ìˆ˜ìžˆì§€ë§Œ ì´ë¯¸ formíŒŒì¼ì€ ë„ˆë¬´í¬ê¸°ì— ë¶„í• í•˜ìžëŠ” ì˜ë¯¸ë¡œ ì—¬ê¸°ì„œ ì‚¬ìš©
// - http ìš”ì²­ì„ ë³´ë‚´ë ¤ë©´ fetchí•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤. ìµœì‹  ë¸Œë¼ìš°ì €ì—ì„œ ì§€ì›í•˜ëŠ” ìžë°”ìŠ¤í¬ë¦½íŠ¸ í•¨ìˆ˜.
//   - ì²˜ìŒì—” ìš”ì²­ì„ ë³´ë‚´ëŠ” URLì„ ìž…ë ¥í•´ì•¼í•˜ëŠ”ë°, firebase apiëŠ” íŠ¹ì´í•˜ê²Œ ëì— .jsonì„ ìž…ë ¥í•´ì•¼í•œë‹¤.
//   - ê¸°ë³¸ì ë¡  getìœ¼ë¡œ ì„¤ì •ì´ ë˜ì–´ìžˆëŠ”ë° ë°ì´í„°ë¥¼ ì €ìž¥í•´ì•¼í•˜ë¯€ë¡œ postë¥¼ ë³´ë‚´ì•¼í•œë‹¤.
//   - POSTë¥¼ ë³´ë‚¼ë•ŒëŠ” ì €ìž¥í•˜ë ¤ëŠ” ë°ì´í„°ë¥¼ ê·¸ ìš”ì²­ì— ì¶”ê°€ë¥¼ í•´ì•¼í•œë‹¤. ì´ë¥¼ bodyì— ë‹´ì•„ ë³´ë‚¸ë‹¤. ì´ë•Œì˜ ë°ì´í„°ëŠ” ëŒ€ë¶€ë¶„ json
//   - JSON.stringifyë¥¼ ì‚¬ìš©í•˜ë©´ ê°ì²´ë‚˜ ë°°ì—´ ê·¸ë¦¬ê³  ì¼ë°˜ì ì¸ ê°’ì´ JSONìœ¼ë¡œ ë³€í™˜ëœë‹¤.
//   - ë§ˆì§€ë§‰ìœ¼ë¡œ ì›í•  ê²½ìš° headerë¥¼ ì¶”ê°€í• ìˆ˜ìžˆëŠ”ë° ì—¬ê¸°ì„œ ì£¼ì˜ í• ì ì´ ì‰¼í‘œë¥¼ ìž˜ ë³´ìž. ì™œì¸ì§€ëŠ” ëª¨ë¥´ê² ìœ¼ë‚˜ ì‰¼í‘œ ë¶™ì—¬ì„œ ì•ˆë˜ë˜ê²Œ ë¨
// - ì´ë•Œ axios ê°™ì€ ì„œë“œíŒŒí‹° íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•´ë„ ëœë‹¤. ì´ë„ ì—­ì‹œ httpìš”ì²­ì„ ë³´ë‚´ê¸° ìœ„í•´ ì“°ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬.
// -----------------------------------------------------------------------------------------
// - ê°•ì˜ìƒì—ì„œëŠ” useHistoryë¥¼ ì‚¬ìš©í•˜ê³ ìžˆëŠ”ë°, react-router-domì´ ì„¤ì¹˜ë˜ì–´ìžˆëŠ”ë°ë„ ì•ˆë˜ëŠ”ê²ƒì„ ë³´ê³  ë¬´ìŠ¨ë¬¸ì œ
// ì¸ì§€ ê²€ìƒ‰ì„ í•´ë³¸ê²°ê³¼ "useHistory Hookì€ react-router 5ë²„ì „ê¹Œì§€ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤. ìµœê·¼ì— ë‚˜ì˜¨ 6ë²„ì „ì—ì„œëŠ” useNavigateë¡œ ë³€ê²½ë˜ì—ˆë‹¤"
// ë¼ê³ í•œë‹¤. 
// - ë°ì´í„°ê°€ ì œì¶œëœí›„ì— ë‹¤ë¥¸ê³³ìœ¼ë¡œ ì´ë™í•˜ë ¤ëŠ” ê²½ìš° fetchê°€ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤ëŠ”ê²ƒì„ ì•Œìˆ˜ìžˆë‹¤. ê·¸ëŸ¼ ë°ì´í„° ì œì¶œ ì¦‰ì‹œ í•´ê²°ë ìˆ˜ìžˆë‹¤.
// ë”°ë¼ì„œ then ë¸”ë¡ì„ ì¶”ê°€í•˜ê³  í”„ë¡œë¯¸ìŠ¤ê°€ ì™„ë£Œë ë•Œ ì‹¤í–‰ë  í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤.
// - replace ì‚¬ìš©í•˜ì—¬ ì´ë™í›„ì•  ë’¤ë¡œê°€ê¸°ê°€ ì•ˆë˜ë„ë¡ ì„¤ì •ì„ í• ìˆ˜ê°€ ìžˆë‹¤.
// -----------------------------------------------------------------------------------------
import React from 'react';
import NewMeetupForm from '../components/meetups/NewMeetupForm';
import {useNavigate} from 'react-router-dom'
const NewMeetup = () => {
    const navigate = useNavigate();
    const addMeetupHandler = (meetupData)=>{
        fetch('https://react-example-started-default-rtdb.firebaseio.com/meetups.json',
        {
            method: "POST",
            body: JSON.stringify(meetupData),
            headers: {
                'Content-Type': 'application/json',// ë³´ë‚¼ ìš”ì²­ì— ë©”íƒ€ë°ì´í„°ë¥¼ ì¶”ê°€ (ì´ëŠ” í•´ë‹¹ ìš”ì²­ì´ json ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ”ê²ƒì„ í™•ì‹¤ížˆí•œë‹¤)
            }
        }).then(()=>{
            //history.replace('/')
            navigate('/',{ replace: true})
        });
    }

    return (
        <div>
            <h1>Add New Meetup</h1>
            <NewMeetupForm onAddMeetup={addMeetupHandler}/>
            
        </div>
    );
};

export default NewMeetup;